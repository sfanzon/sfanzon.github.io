{% comment %}
This is layout for TALKS: it is triggered if talk=true in the bibtex entry. 
Otherwise it is assumed we are dealing with a publication, and the style in the else condition is applied
{% endcomment %}



<div class="row">
  {% if site.enable_publication_thumbnails %}
    <div class="col col-sm-2 abbr">
      {%- if entry.abbr -%}
        {%- if site.data.venues[entry.abbr] -%}
          {% assign venue_style = null %}
          {% if site.data.venues[entry.abbr].color != blank %}
            {% assign venue_style = site.data.venues[entry.abbr].color | prepend: 'style="background-color:' | append: '"' %}
          {%- endif -%}
          <abbr
            class="badge rounded w-100"
            {% if venue_style %}
              {{ venue_style }}
            {% endif -%}
          >
            {% if site.data.venues[entry.abbr].url %}
              <a href="{{ site.data.venues[entry.abbr].url }}">{{ entry.abbr }}</a>
            {% else %}
              <div>{{- entry.abbr -}}</div>
            {% endif %}
          </abbr>
        {% else %}
          <abbr class="badge rounded w-100">{{ entry.abbr }}</abbr>
        {% endif %}
      {% endif %}
      {% if entry.preview %}
        {% if entry.preview contains '://' %}
          <img class="preview z-depth-1 rounded" src="{{ entry.preview }}">
        {% else %}
          {% assign entry_path = entry.preview | prepend: '/assets/img/publication_preview/' %}
          {%
          include figure.liquid
          loading="eager"
          path=entry_path
          sizes = "200px"
          class="preview z-depth-1 rounded"
          zoomable=true
          avoid_scaling=true
          alt=entry.preview
          %}
        {% endif %}
      {% endif %}
       {% comment %} Add badge if PLENARY TALK {% endcomment %}
      {% if entry.plenary %} 
      <abbr class="badge">Plenary</abbr>
      {% endif %}
    </div>
  {% endif %}

  


 <!-- Entry bib key -->
  <div id="{{ entry.key }}" class="col-sm-8">

    {% comment %} Title of Talk - Adds an envelope if invited {% endcomment %}
    {% if entry.invited %} 
      <div class="talk_title">
        <i class="far fa-envelope" style="font-size: 0.85em;"></i>&nbsp;{{ entry.title }}
      </div>
    {% else %}
      <div class="talk_title">{{ entry.title }}</div>
    {% endif %}

    {% comment %} Title of event {% endcomment %}
    {% if entry.event_title %}  
      <div class="conference_title"><em>{{ entry.event_title }}</em></div>
    {% endif %}

    {% comment %} Venue of event, Date {% endcomment %}
    {% if entry.venue %}  
      {% if entry.date %}  
        <div class="conference_venue">{{ entry.venue }}, {{ entry.date }}</div>
      {% else %}
        <div class="conference_venue">{{ entry.venue }}</div>
      {% endif %}  
    {% endif %}  

    {% comment %} Links/Buttons {% endcomment %}
    <div class="links">
      {%- if entry.event_link %}
        <a href="{{ entry.event_link }}" class="btn btn-sm z-depth-0" role="button">Event</a>
      {%- endif %}
      {%- if entry.venue_link %}
        <a href="{{ entry.venue_link }}" class="btn btn-sm z-depth-0" role="button">Venue</a>
      {%- endif %}
      {% if entry.award %}
        <a class="award btn btn-sm z-depth-0" role="button">
        {%- if entry.award_name %}{{ entry.award_name }}{% else %}Awarded{% endif -%}
        </a>
      {% endif %}
      {%- if entry.abstract %}
        <a class="abstract btn btn-sm z-depth-0" role="button">Abs</a>
      {%- endif %}
      {%- if entry.summary %}
        {% if entry.summary contains '://' -%}
          <a href="{{ entry.summary }}" class="btn btn-sm z-depth-0" role="button">Summary</a>
        {%- else -%}
          <a href="{{ entry.summary | prepend: '/assets/pdf/' | relative_url }}" class="btn btn-sm z-depth-0" role="button">Summary</a>
        {%- endif %}
      {%- endif %}
      {%- if entry.lecturenotes %}
        {% if entry.lecturenotes contains '://' -%}
          <a href="{{ entry.lecturenotes }}" class="btn btn-sm z-depth-0" role="button">Lecture Notes</a>
        {%- else -%}
          <a href="{{ entry.lecturenotes | prepend: '/assets/pdf/' | relative_url }}" class="btn btn-sm z-depth-0" role="button">Lecture Notes</a>
        {%- endif %}
      {%- endif %}
      {%- if entry.code %}
        <a href="{{ entry.code }}" class="btn btn-sm z-depth-0" role="button">Code</a>
      {%- endif %}
      {%- if entry.poster %}
        {% if entry.poster contains '://' -%}
          <a href="{{ entry.poster }}" class="btn btn-sm z-depth-0" role="button">Poster</a>
        {%- else -%}
          <a href="{{ entry.poster | prepend: '/assets/pdf/' | relative_url }}" class="btn btn-sm z-depth-0" role="button">Poster</a>
        {%- endif %}
      {%- endif %}
      {%- if entry.slides %}
        {% if entry.slides contains '://' -%}
          <a href="{{ entry.slides }}" class="btn btn-sm z-depth-0" role="button">Slides</a>
        {%- else -%}
          <a href="{{ entry.slides | prepend: '/assets/pdf/' | relative_url }}" class="btn btn-sm z-depth-0" role="button">Slides</a>
        {%- endif %}
      {%- endif %}
      {% if entry.video and site.enable_video_embedding %}
        <a class="abstract btn btn-sm z-depth-0" role="button">Video</a>
      {% elsif entry.video %}
        <a href="{{ entry.video }}" class="btn btn-sm z-depth-0" role="button">Video</a>
      {% endif %}
      {%- if entry.website %}
        <a href="{{ entry.website }}" class="btn btn-sm z-depth-0" role="button">Website</a>
      {%- endif %}
    </div>
  


   {% if entry.award %}
      <!-- Hidden Award block -->
      <div class="award hidden d-print-inline">
        <p>{{ entry.award | markdownify }}</p>
      </div>
    {% endif %}

    
    {% if entry.abstract -%}
      {% comment %} Hidden abstract block {% endcomment %}
      <div class="abstract hidden">
        <p>{{ entry.abstract }}</p>
      </div>
    {%- endif -%}


    {% if entry.video and site.enable_video_embedding %}
      <!-- Hidden video block -->
      <div class="abstract hidden">
        <div style="text-align: center;">{% include video.liquid path=entry.video class="img-fluid rounded z-depth-1" controls=true %}</div>
      </div>
    {% endif %}
  </div>
</div>
